    <div class="compose-env-selector" [formGroup]="parameterForm">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Docker Compose File</mat-label>
        <input type="file" #composeFileInput [id]="'compose-file-input'" (change)="onComposeFileSelected($event)" style="display: none;" accept=".yml,.yaml" />

        <!-- show only filename to user -->
        <input matInput [value]="composeFileName() || ''" [required]="true" readonly />

        <!-- keep actual payload in form control for backend -->
        <input type="hidden" formControlName="compose_file" />

        <button mat-icon-button matSuffix type="button" (click)="composeFileInput.click()" matTooltip="Select docker-compose.yml file" matTooltipPosition="above">
          <mat-icon>attach_file</mat-icon>
        </button>

        <!-- prevent duplicate "start" hints -->
        <mat-hint align="end">Upload your docker-compose.yml file</mat-hint>

        @if (composeFileError()) {
          <mat-error>{{ composeFileError() }}</mat-error>
        }
      </mat-form-field>

      @if (mode === 'single' && services().length > 1) {
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Select Service</mat-label>
          <mat-select [value]="selectedServiceName()" (selectionChange)="onServiceSelected($event.value)">
            @for (service of services(); track service.name) {
              <mat-option [value]="service.name">{{ service.name }}</mat-option>
            }
          </mat-select>
          <mat-hint>Select the service to configure volumes and environment variables for</mat-hint>
        </mat-form-field>
      }

      <mat-form-field appearance="outline" class="full-width" [class.error-field]="envFileError() || hasMissingEnvVars()">
        <mat-label>Environment File (.env)</mat-label>
        <input type="file" #envFileInput [id]="'env-file-input'" (change)="onEnvFileSelected($event)" style="display: none;" />

        <!-- show only filename to user -->
        <input matInput [value]="envFileName() || ''" readonly />

        <!-- keep actual payload in form control for backend/validation -->
        <input type="hidden" formControlName="env_file" />

        <button mat-icon-button matSuffix type="button" (click)="envFileInput.click()" [matTooltip]="getEnvFileTooltip()" matTooltipPosition="above">
          <mat-icon>attach_file</mat-icon>
        </button>

        <mat-hint>Optional: Upload your .env file.</mat-hint>

        @if (envFileError()) {
          <mat-error>{{ envFileError() }}</mat-error>
        }
        @if (hasMissingEnvVars() && !envFileError()) {
          <mat-error>Missing variables can be configured in the next step.</mat-error>
        }
      </mat-form-field>

      @if (composeProperties()) {
        <mat-card class="compose-properties-card">
          <mat-card-header>
            <mat-card-title>Extracted Compose Properties</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <mat-error>
              @if (composeFileError()) {
            {{ composeFileError() }}
              }
              @if (envFileError()) {
            {{ envFileError() }}
              }
            </mat-error>
          </mat-card-content>
        </mat-card>
          }
    </div>